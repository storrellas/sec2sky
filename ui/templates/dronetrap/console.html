{% extends 'dronetrap/base.html' %}
{% block title %}CONSOLE{% endblock title %}
{% block nav-style %}mkt-nav{% endblock nav-style %}

{% block content %} 

            <nav class="navbar-static-side" role="navigation">
                 <div class="sidebar-collapse">
                     <ul class="nav" id="side-menu">
                         <li>
                             <a href="#"><i class="fa fa-dashboard fa-fw"></i> DETECTIONS</a>
                         </li>
                         <li id="sidebar-detections">
                             <!-- /.nav-second-level -->
                         </li>
                     </ul>
                     <!-- /#side-menu -->
                 </div>
                 <!-- /.sidebar-collapse -->
             </nav>
             <!-- /.navbar-static-side -->

            <div id="page-wrapper">
            <!-- /.row -->
            <div class="row fullheight" >
             <div class="col-lg-12">

                <div id="primary">
                    <div id="map_actions" class="clearfix">
                    </div>
                    <div id="map_trail">
                        <div id="map_canvas" style="width: 100%; height: 100%; position: relative; overflow: hidden;" ></div>
                            <div id="map_details" style="display:none">
                                <div id="elevation-chart">
                                <div id="pos-marker"></div>
                                <div id="pos-marker-current-alt"><span id="pm-alt">-</span></div>
                                <div id="pos-marker-current-pos"><span id="pm-pos">-</span></div>
                                <div class="map_svg-wrapper"></div>
                                </div>
                            <div id="el-max">1.788&nbsp;m</div>
                            <div id="el-min">594&nbsp;m <input type="checkbox" id="autocenter" value="Autocenter"/></div>
                            <div id="el-len1" class="el-len">0</div>
                            <div id="el-len2" class="el-len">91</div>
                            <div id="el-len3" class="el-len">183</div>
                            <div id="el-len4" class="el-len hidden-xs">274</div>
                            <div id="el-len5" class="el-len">365,78&nbsp;km</div>
                            <div class="hide-button" title="Hide"><span class="glyphicon glyphicon-chevron-down"></span></div>
                        </div>
                        <div id="map_details-but" >
                            <div class="hide-button" title="Show details"><span class="glyphicon glyphicon-chevron-up"></span>Show Details</div>
                        </div>
                    </div>
                </div>

                </div>
            </div>
               
                


        {% endblock content %}

        {% block footer_javascript_page %}

        <script src="/static/js/map-tools.js"></script>
        <script>
        $(function(){
          $('#map_trail').css({height: $(window).innerHeight()-$(".navbar").innerHeight()});
          $(window).resize(function(){
            $('#map_trail').css({height: $(window).innerHeight()-$(".navbar").innerHeight()});
          })
        })
        $(document).ready(function () {
          initElevationProfile();
          $(".hide-button").click(function (e) {
            $('#map_details').toggle();
            $('#map_details-but').toggle();
            e.stopPropagation();
          });
          $("#map_details-but").on('click', function (e) {
            $('#map_details').toggle();
            $('#map_details-but').toggle();
          });
        });
        </script>

        
        <script> var isoLang ='es';</script>
        <script src="/static/js/elevationProfile.js"></script>
        <script src="/static/js/elevationProfileSvg.min.js"></script>
        <script>

                    var trinfo = {l:38567,data:{lat:[41.491715,41.490750,41.490012,41.490012,41.488944,41.488043,41.488267,41.488813,41.490355,41.485843,41.484363,41.482755,41.481725,41.481596,41.481852,41.482140,41.482461,41.482621,41.482041,41.481268,41.480528],lng:[2.261730,2.261902,2.261978,2.261978,2.263458,2.264703,2.267750,2.270024,2.271955,2.277996,2.278511,2.277610,2.275335,2.272674,2.270399,2.268682,2.266794,2.264305,2.262588,2.262330,2.263532],dir:[180,20,200,230,220,210,250,280,290,250,210,220,220,220,240,260,280,290,230,210,220],ele:[180,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],ncoords: 21,plat:41.491715,plng:2.261730},units:{x:"3",y:"2",lx:"km",ly:"m"}};


                
                var elevationChartContainer = document.querySelector('.map_svg-wrapper');
                var unit = 2;
                var minElevation = parseInt("594".replace(/[\.,\s]/g, ""), 10);
                var maxElevation = parseInt("1.788".replace(/[\.,\s]/g, ""), 10);
                if (unit == 1) { // Feets
                  minElevation /= 3.2808399;
                  maxElevation /= 3.2808399;
                }
                window.onresize = function() {
                  var wasPositionDotVisible = positionDot.is(':visible');
                  initElevationProfile();
                  if (wasPositionDotVisible) {
                    setDroneMarker();
                  }
                }
            </script>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAXTqRt3ofrUr3avtW61II41MM71q77OEo" type="text/javascript"></script>
        <script>
          show_map({lat:41.490427,lng:2.262536},15);
        </script>

        <script >
          function InitMap( _center,_zoom,_type){
            map = new google.maps.Map(document.getElementById('map_canvas'), {
              zoom: _zoom,
              center: _center,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              disableDefaultUI: true
            });
          }
        </script>




        
        <script>
            var value = false;
            setInterval(function(){  
              value = !value;
              $('.data-blink').css('opacity', Number(value))
            }, 500)
        </script>
        <script>
          setTimeout(detections, interval);
        </script>

        {% endblock footer_javascript_page %}
